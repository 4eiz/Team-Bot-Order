from aiogram import Router
from aiogram.types import Message
from aiogram.filters import CommandStart
from aiogram import Router, F
from aiogram.types import CallbackQuery
from aiogram.fsm.context import FSMContext

from keyboards.client import worker_menu, Menu_callback, send_request, worker_menu_admin
from data import users

from config import ADMIN, bot

router = Router()




@router.message(CommandStart())
async def start(message: Message, state: FSMContext):
    try:
        await state.clear()
    except:
        pass

    id = message.from_user.id
    start_user = await users.check_worker_in_database(id)
    if start_user == True:
        text = f'''<b>
ğŸ‘‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, <code>{message.from_user.first_name}</code>!

ğŸ’Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Fortune Team!ğŸ’

ğŸ”±Ñƒ Ğ½Ğ°Ñ Ğ»ÑƒÑ‡ÑˆĞ¸Ğµ Ğ¾Ñ„Ñ„ĞµÑ€Ñ‹ Ğ¿Ğ¾ OnlyFans:
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
â”” ĞŸĞ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‡Ğ¸Ğº Ğ¾Ñ‚ 5$ 
â”” Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‡Ğ¸Ğº Ğ¾Ñ‚ 0.5$
â”” Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

âš¡ï¸ĞŸĞµÑ€ĞµĞ´ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹:
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
â”” Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½ÑƒÑ ÑÑÑ‹Ğ»ĞºÑƒ
â”” ĞĞ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ñ‚ĞµÑÑŒ Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ¾Ğ¼
â”” ĞŸĞ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ² Ñ„Ğ¸Ğ»Ğ¸Ğ°Ğ» 
â”” ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸
</b>'''
        if id in ADMIN:
            kb = worker_menu_admin()
        else:
            kb = worker_menu()

        await message.answer(text, reply_markup=kb)

    else:
        text = f'<b>ğŸ‘‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, {message.from_user.first_name}!\n\nĞ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ¿Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞµ Ğ½Ğ¸Ğ¶Ğµ.</b>'
        await message.answer(text, reply_markup=send_request())



@router.callback_query(Menu_callback.filter(F.menu == 'menu'))
async def start(call: CallbackQuery, callback_data: Menu_callback, state: FSMContext):
    try:
        await state.clear()
    except:
        pass

    id = call.from_user.id
    start_user = await users.check_worker_in_database(id)
    if start_user == True:
        text = f'''<b>
ğŸ‘‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, <code>{call.from_user.first_name}</code>!

ğŸ’Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Fortune Team!ğŸ’

ğŸ”±Ñƒ Ğ½Ğ°Ñ Ğ»ÑƒÑ‡ÑˆĞ¸Ğµ Ğ¾Ñ„Ñ„ĞµÑ€Ñ‹ Ğ¿Ğ¾ OnlyFans:
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
â”” ĞŸĞ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‡Ğ¸Ğº Ğ¾Ñ‚ 5$ 
â”” Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑ‡Ğ¸Ğº Ğ¾Ñ‚ 0.5$
â”” Ğ˜Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

âš¡ï¸ĞŸĞµÑ€ĞµĞ´ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹:
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
â”” Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ Ğ¸Ğ½Ğ´Ğ¸Ğ²Ğ¸Ğ´ÑƒĞ°Ğ»ÑŒĞ½ÑƒÑ ÑÑÑ‹Ğ»ĞºÑƒ
â”” ĞĞ·Ğ½Ğ°ĞºĞ¾Ğ¼Ğ¸Ñ‚ĞµÑÑŒ Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ¾Ğ¼
â”” ĞŸĞ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ² Ñ„Ğ¸Ğ»Ğ¸Ğ°Ğ» 
â”” ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ğ¸
</b>'''
        if id in ADMIN:
            kb = worker_menu_admin()
        else:
            kb = worker_menu()

        await call.message.edit_text(text, reply_markup=kb)

    else:
        text = f'<b>ğŸ‘‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, <code>{call.from_user.first_name}</code>!\n\nĞ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ¿Ğ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞµ Ğ½Ğ¸Ğ¶Ğµ.</b>'
        await call.message.edit_text(text, reply_markup=send_request())



    # if message.from_user.id == ADMIN:
    #     await message.answer(f'<b>ğŸ‘‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, {message.from_user.first_name}!\n\n'
    #                         'Ğ’Ñ‹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ĞµÑÑŒ Ğ² Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¼ Ğ¼ĞµĞ½Ñ.</b>', reply_markup=k_menu2())
    # else:
    #     await message.answer(f'<b>ğŸ‘‹ Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ, {message.from_user.first_name}!\n\n'
    #                         'Ğ’Ñ‹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ĞµÑÑŒ Ğ² Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¼ Ğ¼ĞµĞ½Ñ.</b>', reply_markup=k_menu())

